{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import{useAuth}from'../context/AuthContext';import'./ClientMessage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ClientMessages=_ref=>{let{messages=[],setMessages}=_ref;const{user}=useAuth();const[searchOpen,setSearchOpen]=useState(false);const[search,setSearch]=useState('');const inputRef=useRef(null);const handleDelete=idx=>{setMessages(prev=>prev.filter((_,i)=>i!==idx));};useEffect(()=>{if(searchOpen&&inputRef.current){inputRef.current.focus();}},[searchOpen]);const filteredMessages=search?messages.filter(msg=>msg.name&&msg.name.toLowerCase().includes(search.toLowerCase())||msg.text&&msg.text.toLowerCase().includes(search.toLowerCase())):messages;return/*#__PURE__*/_jsxs(\"aside\",{className:\"client-messages\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"client-messages-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"client\",children:\"Client Messages\"}),/*#__PURE__*/_jsx(\"span\",{className:\"client-messages-search\",onClick:()=>setSearchOpen(v=>!v),children:\"\\uD83D\\uDD0D\"}),/*#__PURE__*/_jsx(\"input\",{ref:inputRef,className:\"client-messages-searchbar\".concat(searchOpen?' open':''),type:\"text\",placeholder:\"Search messages...\",value:search,onChange:e=>setSearch(e.target.value)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"client-messages-list\",children:filteredMessages.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"no-client-messages\",children:\"No messages found.\"}):filteredMessages.map((msg,idx)=>{const isOwner=user&&msg.name===user.username;return/*#__PURE__*/_jsxs(\"div\",{className:\"client-message\",children:[/*#__PURE__*/_jsx(\"img\",{src:msg.avatar,alt:msg.name,className:\"client-message-avatar\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"client-message-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"client-message-name\",children:msg.name}),/*#__PURE__*/_jsx(\"div\",{className:\"client-message-text\",children:msg.text})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"client-message-meta\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"client-message-date\",children:msg.date}),isOwner&&/*#__PURE__*/_jsx(\"button\",{className:\"client-message-delete\",title:\"Delete Message\",onClick:()=>handleDelete(idx),children:/*#__PURE__*/_jsx(\"svg\",{width:\"18\",height:\"18\",viewBox:\"0 0 20 20\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",\"aria-hidden\":\"true\",focusable:\"false\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M7.5 7.5V14.5M10 7.5V14.5M12.5 7.5V14.5M4.5 5.5H15.5M8.5 3.5H11.5C12.0523 3.5 12.5 3.94772 12.5 4.5V5.5H7.5V4.5C7.5 3.94772 7.94772 3.5 8.5 3.5Z\",stroke:\"#d12a2a\",strokeWidth:\"1.5\",strokeLinecap:\"round\",strokeLinejoin:\"round\"})})})]})]},idx);})})]});};export default ClientMessages;","map":{"version":3,"names":["React","useState","useRef","useEffect","useAuth","jsx","_jsx","jsxs","_jsxs","ClientMessages","_ref","messages","setMessages","user","searchOpen","setSearchOpen","search","setSearch","inputRef","handleDelete","idx","prev","filter","_","i","current","focus","filteredMessages","msg","name","toLowerCase","includes","text","className","children","onClick","v","ref","concat","type","placeholder","value","onChange","e","target","length","map","isOwner","username","src","avatar","alt","date","title","width","height","viewBox","fill","xmlns","focusable","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin"],"sources":["C:/Users/ADMIN/core/project-manage/frontend/src/components/ClientMessages.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport './ClientMessage.css';\r\n\r\nconst ClientMessages = ({ messages = [], setMessages }) => {\r\n  const { user } = useAuth();\r\n  const [searchOpen, setSearchOpen] = useState(false);\r\n  const [search, setSearch] = useState('');\r\n  const inputRef = useRef(null);\r\n\r\n  const handleDelete = idx => {\r\n    setMessages(prev => prev.filter((_, i) => i !== idx));\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (searchOpen && inputRef.current) {\r\n      inputRef.current.focus();\r\n    }\r\n  }, [searchOpen]);\r\n\r\n  const filteredMessages = search\r\n    ? messages.filter(msg =>\r\n        (msg.name && msg.name.toLowerCase().includes(search.toLowerCase())) ||\r\n        (msg.text && msg.text.toLowerCase().includes(search.toLowerCase()))\r\n      )\r\n    : messages;\r\n\r\n  return (\r\n    <aside className=\"client-messages\">\r\n      <div className=\"client-messages-header\">\r\n        <span className='client'>Client Messages</span>\r\n        <span className=\"client-messages-search\" onClick={() => setSearchOpen(v => !v)}>üîç</span>\r\n        <input\r\n          ref={inputRef}\r\n          className={`client-messages-searchbar${searchOpen ? ' open' : ''}`}\r\n          type=\"text\"\r\n          placeholder=\"Search messages...\"\r\n          value={search}\r\n          onChange={e => setSearch(e.target.value)}\r\n        />\r\n      </div>\r\n      <div className=\"client-messages-list\">\r\n        {filteredMessages.length === 0 ? (\r\n          <div className=\"no-client-messages\">No messages found.</div>\r\n        ) : (\r\n          filteredMessages.map((msg, idx) => {\r\n            const isOwner = user && msg.name === user.username;\r\n            return (\r\n              <div className=\"client-message\" key={idx}>\r\n                <img src={msg.avatar} alt={msg.name} className=\"client-message-avatar\" />\r\n                <div className=\"client-message-content\">\r\n                  <div className=\"client-message-name\">{msg.name}</div>\r\n                  <div className=\"client-message-text\">{msg.text}</div>\r\n                </div>\r\n                <div className=\"client-message-meta\">\r\n                  <span className=\"client-message-date\">{msg.date}</span>\r\n                  {isOwner && (\r\n                    <button className=\"client-message-delete\" title=\"Delete Message\" onClick={() => handleDelete(idx)}>\r\n                      <svg width=\"18\" height=\"18\" viewBox=\"0 0 20 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\" focusable=\"false\">\r\n                        <path d=\"M7.5 7.5V14.5M10 7.5V14.5M12.5 7.5V14.5M4.5 5.5H15.5M8.5 3.5H11.5C12.0523 3.5 12.5 3.94772 12.5 4.5V5.5H7.5V4.5C7.5 3.94772 7.94772 3.5 8.5 3.5Z\" stroke=\"#d12a2a\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\r\n                      </svg>\r\n                    </button>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            );\r\n          })\r\n        )}\r\n      </div>\r\n    </aside>\r\n  );\r\n};\r\n\r\nexport default ClientMessages; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}